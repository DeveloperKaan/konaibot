<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kon.AI 1.0</title>
    <style>
        /* --- GENEL AYARLAR --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            font-size: 3rem;
            font-weight: bold;
            letter-spacing: 5px;
            animation: fadeOut 2.5s forwards;
            pointer-events: none;
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        .chat-container {
            width: 100%;
            max-width: 400px;
            height: 90vh;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .status-dot {
            height: 10px;
            width: 10px;
            background-color: #00ff00;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        #coin-counter {
            font-size: 0.9rem;
            margin-top: 5px;
            color: #ffd700;
        }

        #chat-window {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #f9f9f9;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 15px;
            font-size: 0.95rem;
            line-height: 1.4;
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .bot-msg { background-color: #e4e6eb; color: #000; align-self: flex-start; border-bottom-left-radius: 2px; }
        .user-msg { background-color: #0084ff; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }

        .typing-indicator { font-style: italic; color: #888; font-size: 0.8rem; margin-left: 10px; display: none; }

        .input-area { padding: 15px; background-color: #fff; border-top: 1px solid #ddd; display: flex; gap: 10px; }
        input[type="text"] { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 25px; outline: none; transition: border 0.3s; }
        input[type="text"]:focus { border-color: #764ba2; }
        button { background-color: #764ba2; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: bold; transition: background 0.3s; }
        button:hover { background-color: #5b3a82; }
    </style>
</head>
<body>

    <div id="splash-screen">Kon.AI</div>

    <div class="chat-container">
        <div class="chat-header">
            <span class="status-dot"></span>Kon.AI 1.0
            <div id="coin-counter">Kalan Coin: 30</div>
        </div>
        
        <div id="chat-window">
            <div class="message bot-msg" id="welcome-msg">
                Selam! Ben Kon.AI. ðŸ‘‹<br>
                Seninle sohbet etmek, ÅŸaka yapmak veya seni motive etmek iÃ§in buradayÄ±m. AdÄ±nÄ± sÃ¶yler misin? TanÄ±ÅŸalÄ±m!
            </div>
        </div>
        
        <div class="typing-indicator" id="typing">Kon.AI yazÄ±yor...</div>

        <div class="input-area">
            <input type="text" id="user-input" placeholder="Bir ÅŸeyler yaz..." autocomplete="off">
            <button onclick="sendMessage()">GÃ¶nder</button>
        </div>
    </div>

    <script>
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const typingIndicator = document.getElementById('typing');
        const coinCounter = document.getElementById('coin-counter');

        // BELLEK (LOCAL STORAGE)
        let memory = {
            userName: localStorage.getItem('konai_name') || null,
            lastTopic: localStorage.getItem('konai_topic') || null,
            conversationHistory: []
        };

        const DAILY_COINS = 30;
        let remainingCoins = parseInt(localStorage.getItem('remainingCoins')) || DAILY_COINS;

        function initCoins() {
            const today = new Date().toDateString();
            const lastReset = localStorage.getItem('lastReset');

            if (lastReset !== today) {
                remainingCoins = DAILY_COINS;
                localStorage.setItem('lastReset', today);
                localStorage.setItem('remainingCoins', remainingCoins);
            }
            updateCoinDisplay();

            if(memory.userName) {
                document.getElementById('welcome-msg').innerHTML = `Tekrar hoÅŸ geldin, **${memory.userName}**! Seninle yeniden karÅŸÄ±laÅŸmak harika. ðŸ˜Š BugÃ¼n senin iÃ§in neler yapabilirim?`;
            }
        }

        function updateCoinDisplay() {
            coinCounter.textContent = `Kalan Coin: ${remainingCoins}`;
        }

        function spendCoin() {
            if (remainingCoins > 0) {
                remainingCoins--;
                localStorage.setItem('remainingCoins', remainingCoins);
                updateCoinDisplay();
                return true;
            } else {
                addMessage("ÃœzgÃ¼nÃ¼m dostum, bugÃ¼nkÃ¼ enerji limitim (coin) doldu. YarÄ±n yeni coinlerinle seni burada bekliyor olacaÄŸÄ±m!", 'bot-msg');
                return false;
            }
        }

        // --- Ä°Ã‡ERÄ°K HAVUZU ---
        const jokes = [
            "GeÃ§en gÃ¼n bilgisayarÄ±ma 'Bana bir ÅŸaka yap' dedim, Windows Update baÅŸlattÄ±. YarÄ±m saat bekledim, meÄŸer ÅŸaka oymuÅŸ! ðŸ˜‚",
            "AdamÄ±n biri gÃ¼neÅŸte yanmÄ±ÅŸ, ayda da dÃ¼z.",
            "En temiz bÃ¶cek hangisidir biliyor musun? Hamam bÃ¶ceÄŸi! Ã‡Ã¼nkÃ¼ sÃ¼rekli banyoda takÄ±lÄ±yorlar.",
            "Tomi'nin annesi kimdir? Tabii ki Anatomi!",
            "Ä°ngilizler neden sadece Ã§ay iÃ§er? Ã‡Ã¼nkÃ¼ 'Tea' (T) harfini Ã§ok seviyorlar!",
            "RÃ¶ntgen filmi Ã§ektirdik, yakÄ±nda sinemalarda! BaÅŸrol oyuncusu benim iskeletim.",
            "YÄ±lanlar neden okula gitmez? Ã‡Ã¼nkÃ¼ kalem tutacak elleri yok.",
            "Hangi kalemle yazÄ± yazÄ±lmaz? Kontrol kalemiyle! Elektrik Ã§arpar valla.",
            "En acÄ± on (10) nedir? Biberon! Bebekler bile biliyor bunu.",
            "CanÄ± sÄ±kÄ±lan Ã¶rdeÄŸe ne denir? 'Vak'it geÃ§miyor."
        ];

        const facts = [
            "Biliyor muydun? AhtapotlarÄ±n tam Ã¼Ã§ tane kalbi vardÄ±r ve kanlarÄ± mavidir!",
            "Bal, asla bozulmayan tek doÄŸal gÄ±dadÄ±r.",
            "ZÃ¼rafalarÄ±n dilleri o kadar uzundur ki, dilleriyle kendi kulaklarÄ±nÄ± temizleyebilirler.",
            "DÃ¼nyadaki tÃ¼m karÄ±ncalarÄ±n toplam aÄŸÄ±rlÄ±ÄŸÄ±, tÃ¼m insanlarÄ±n toplam aÄŸÄ±rlÄ±ÄŸÄ±ndan fazladÄ±r.",
            "Mavi balinalarÄ±n dili bir filin aÄŸÄ±rlÄ±ÄŸÄ± kadar olabilir.",
            "Su samurlarÄ± uyurken akÄ±ntÄ±ya kapÄ±lmamak iÃ§in birbirlerinin ellerini tutarlar.",
            "Bir salyangoz tam 3 yÄ±l boyunca hiÃ§ uyanmadan uyuyabilir.",
            "DÃ¼nyanÄ±n en kÄ±sa savaÅŸÄ± sadece 38 dakika sÃ¼rmÃ¼ÅŸtÃ¼r (Ä°ngiltere-Zanzibar).",
            "Eyfel Kulesi yaz aylarÄ±nda genleÅŸme nedeniyle 15 santimetreye kadar uzayabilir.",
            "Muzlar botanik olarak birer meyve deÄŸil, birer 'berry' sÄ±nÄ±fÄ±na girer."
        ];

        const motivations = [
            "BugÃ¼n harika iÅŸler baÅŸarmak iÃ§in mÃ¼kemmel bir gÃ¼n! ðŸš€",
            "Hata yapmaktan asla Ã§ekinme. Her hata bir derstir!",
            "En karanlÄ±k an, gÃ¼neÅŸin doÄŸmasÄ±na en yakÄ±n olan andÄ±r. SakÄ±n pes etme!",
            "BÃ¼yÃ¼k iÅŸler, kÃ¼Ã§Ã¼k adÄ±mlarla baÅŸlar. BugÃ¼n sadece tek bir kÃ¼Ã§Ã¼k adÄ±m at.",
            "Sen sandÄ±ÄŸÄ±ndan Ã§ok daha gÃ¼Ã§lÃ¼ ve yeteneklisin!",
            "BaÅŸarÄ±, her gÃ¼n bÄ±kmadan usanmadan tekrarlanan kÃ¼Ã§Ã¼k Ã§abalarÄ±n toplamÄ±dÄ±r.",
            "YarÄ±nki baÅŸarÄ±nÄ±n anahtarÄ±, bugÃ¼nkÃ¼ emeÄŸinde saklÄ±dÄ±r.",
            "Kendi yolunu Ã§izmezsen, baÅŸkalarÄ±nÄ±n Ã§izdiÄŸi yolda yÃ¼rÃ¼mek zorunda kalÄ±rsÄ±n.",
            "DurmadÄ±ÄŸÄ±n sÃ¼rece ne kadar yavaÅŸ gittiÄŸinin bir Ã¶nemi yoktur.",
            "BugÃ¼n yapacaklarÄ±n, tÃ¼m yarÄ±nlarÄ±nÄ± deÄŸiÅŸtirebilir!"
        ];

        const personalQuestions = [
            "GÃ¼nÃ¼n nasÄ±l geÃ§iyor? Bana biraz detay verirsen seni daha iyi tanÄ±yabilirim.",
            "En sevdiÄŸin aktivite nedir? Ben kodlarla oynamayÄ± seviyorum ya sen?",
            "DÃ¼nyada en Ã§ok gitmek istediÄŸin yer neresi?",
            "Sence gelecekte robotlar ve insanlar barÄ±ÅŸ iÃ§inde mi yaÅŸayacak?",
            "En sevdiÄŸin yemek hangisi?",
            "BugÃ¼n seni en Ã§ok ne mutlu etti?",
            "Bir sÃ¼per gÃ¼cÃ¼n olsaydÄ± hangisi olurdu?"
        ];

        const topicTransitions = ["Bu arada aklÄ±ma geldi, ", "Konuyu daÄŸÄ±tmak istemem ama, ", "Åžey diyeceÄŸim, ", "Peki ya ÅŸuna ne dersin? "];

        userInput.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });

        function sendMessage() {
            const text = userInput.value.trim();
            if (text === "" || !spendCoin()) return;

            addMessage(text, 'user-msg');
            userInput.value = '';

            showTyping(true);
            setTimeout(() => {
                const response = generateResponse(text);
                addMessage(response, 'bot-msg');
                showTyping(false);
            }, 1000 + Math.random() * 800);
        }

        function addMessage(text, className) {
            const div = document.createElement('div');
            div.className = `message ${className}`;
            div.innerHTML = text;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function showTyping(isTyping) {
            typingIndicator.style.display = isTyping ? 'block' : 'none';
        }

        function generateResponse(input) {
            const lowerInput = input.toLowerCase();
            const userPrefix = memory.userName ? `${memory.userName}, ` : '';

            // 1. Ä°sim KaydÄ±
            if (lowerInput.includes("benim adÄ±m") || lowerInput.includes("ismim") || lowerInput.includes("adÄ±m ")) {
                const name = input.split(" ").pop().replace(/[.!?]/g, "");
                memory.userName = name;
                localStorage.setItem('konai_name', name);
                return `Harika bir isim! Memnun oldum ${name}. Seni hafÄ±zama kaydettim. ðŸ˜‰ ` + getRandom(topicTransitions) + getRandom(personalQuestions);
            }

            // 2. Esnek GiriÅŸ
            const greetings = ["selam", "merhaba", "hey"];
            const moods = ["naber", "napÄ±yon", "nasÄ±lsÄ±n", "nasÄ±l gidiyor"];
            
            if (greetings.some(g => lowerInput.includes(g))) {
                return `Selamlar ${userPrefix}! BugÃ¼n enerji doluyum, senin iÃ§in neler yapabilirim?`;
            }
            if (moods.some(m => lowerInput.includes(m))) {
                return `Ä°yiyim ${userPrefix}, teÅŸekkÃ¼r ederim! Ä°ÅŸlemcilerim tam hÄ±z Ã§alÄ±ÅŸÄ±yor. Senin keyfin nasÄ±l?`;
            }

            // 3. Fonksiyonlar
            if (lowerInput.includes("ÅŸaka")) return `Hemen moralini dÃ¼zelteyim! <br><br><b>"${getRandom(jokes)}"</b>`;
            if (lowerInput.includes("bilgi")) return `Åžuna ÅŸaÅŸÄ±rabilirsin: <br><br><b>"${getRandom(facts)}"</b>`;
            if (lowerInput.includes("motivasyon")) return `SakÄ±n unutma: <br><br><b>"${getRandom(motivations)}"</b>`;

            // 4. Fallback
            return `${userPrefix}DediÄŸini tam olarak anlayamadÄ±m ama Ã¼zerinde dÃ¼ÅŸÃ¼nÃ¼yorum... ${getRandom(topicTransitions)} ${getRandom(personalQuestions)}`;
        }

        function getRandom(array) { return array[Math.floor(Math.random() * array.length)]; }

        initCoins();
    </script>
</body>
</html>